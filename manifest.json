{
  "triggers": {
    "listener": {
      "module": "@hossapp/http",
      "version": "1.0.0",
      "functionName": "listener",
      "flow": "listAccounts",
      "params": {
        "path": "/accounts",
        "method": "GET"
      },
      "result": {
        "statusCode": {
          "type": "Value",
          "value": 200
        },
        "statusReason": {
          "type": "Value",
          "value": "OK"
        },
        "body": {
          "type": "Code",
          "value": "JSON.stringify(context.steps.transformQuickbooksAccountResponse)"
        }
      }
    }
  },
  "flows": {
    "listAccounts": {
      "start": "requestQuickbooks",
      "onError": "catchallErrorHandler",

      "steps": {
        "requestQuickbooks": {
          "type": "Module",
          "module": "@hossapp/quickbooks-connector",
          "className": "QuickbooksConnector",
          "version": "1.0.0",
          "constructorParams": {
            "clientId": {
              "type": "Value",
              "value": "ABPeL4NrrA8DgUYiVLWWtQO4nHKFeboV0v24SroB5KhatoktEV"
            },
            "clientSecret": {
              "type": "Value",
              "value": "exnKGl6PeIRifLpGp7Rr0uwwxq27wQpAX17YqEBX"
            },
            "accessToken": {
              "type": "Value",
              "value": "eyJlbmMiOiJBMTI4Q0JDLUhTMjU2IiwiYWxnIjoiZGlyIn0..Pte9YX0JLkKhvLVAaOnsDw.8z75cAYKseK5AmEGQ1HpgtoxH9xBbepyQQPFspnSx7rA8OreSgFzE7Wkq8p77l3Fp8DE9yj3_Yo5WnqLgjofeg3dIZ5-SlwhTHRuFznVwAB0oZxZP3E3f-HPhHQ3qbbUs0QJzmXoT1Q-c-tHNn7YvPuIQIARAYdwL-RPknvg3K-NXRMaZWxaKkiW3qGuCIiZkMxzU4EXLXspxBJ0j4HhR0qn7zASJYdzyiljgEehgkRWykm_ekJif-63CEKI4Vixcnr1ecV3CxwtCZC8Tot6qdtUDBeSmHcIpo0rNrK4iCSS8YULpnpQbtjLX1LSKOvF1ZZbmHdY8qCF0WGVYsFWjQRZC4kV4EP-B34Zd7YbsUkApHPgC1INU5EMjWRuKuoZQ7Z1dPkljRDnY7-Ih0ONA1-RtxeHUNlv38LM0YtPdcgqTNBkxf2iT4pJcrZcRT0YSUUIBqnoaadIOMYZP5jdPO6P0fvAo-SZ8GN7D-eNEyVyietJC0y9nS7Q8Mvxnl7n_1v2PcvmKph0D0Lywy7LuDTTXCUytXBmu1FExK8pqZqQlVaplq92dRL1VQlOBe6aPaDZlOkqHBStVSKaVm50GH7vKS6sEp6jEQqbZ1mAk2cQ0n-us9uP3GpX1Gb9XXnsSqYQNGBI0aoHqo3dF_OBExll7ByB6sQpuor-ep30qPUiYcjeMfIRFsEULQnccqLzVpat-pbKyq-Nse0nVEGMhQDZzUJkKRkL9hnWyTqrpMPB-9YXlXci9BkXeRVnjkIm.cGXCm9Bvk5-yIyhS1y-egw"
            },
            "refreshToken": {
              "type": "Value",
              "value": "AB116084668876iYzVjLmL7ZvBUfoZAyfPd8fWyhJcrxvfGR9O"
            },
            "realmId": {
              "type": "Value",
              "value": "4620816365148044900"
            }
          },
          "functionName": "findAccounts",
          "onError": "quickbooksErrorHandler",
          "next": "transformQuickbooksAccountResponse"
        },
        "quickbooksErrorHandler": {
          "code": "context.response={statusCode: 500, body: 'internal server error'};",
          "end": true
        },
        "transformQuickbooksAccountResponse": {
          "type": "Module",
          "module": "@hossapp/transform",
          "version": "1.0.0",
          "functionName": "transformJSON",
          "end": true,
          "params": {
            "input": {
              "type": "Code",
              "value": "context.steps.requestQuickbooks"
            },
            "jsonataExpression": {
              "type": "Value",
              "value": "QueryResponse.Account.{\"name\": Name,\"type\": AccountType, \"subType\": AccountSubType, \"id\": Id}"
            }
          }
        },
        "catchallErrorHandler": {
          "code": "context.response={statusCode: 500, body: 'internal server error'};",
          "end": true
        }
      }
    }
  }
}
